<p-toolbar>
  <div class="card flex flex-wrap gap-3 justify-content-center">
      <p-button (click)="addPath()" label="Add" class="mr-2"></p-button>
      <p-button (click)="recalculate()" label="Recalculate" class="mr-2"></p-button>
      <p-button class="mr-2" icon="pi pi-upload" (click)="saveConfigs()" label="Save" severity="success"></p-button>
      <p-button [disabled]="processingCapture" (click)="captureWindow()" label="Capture Screen" class="mr-2"></p-button>
      <p-progressSpinner *ngIf="processingCapture" styleClass="w-4rem h-4rem" fill="var(--surface-ground)" animationDuration=".5s"></p-progressSpinner>
  </div>
</p-toolbar>
<p-toast></p-toast>

<p-table [value]="configs" [tableStyle]="{'min-width': '50rem'}">
  <ng-template pTemplate="header" let-columns>
      <tr>
          <th></th>
          <th></th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-rowIndex="rowIndex" let-config>
    <tr>
        <td>
          <p-panel>
            <ng-template pTemplate="header">
              <span class="text-primary font-semibold text-xl"><b>Path：{{config.path}}</b></span>
            </ng-template>
            <label (click)="copyText(config)">{{config.hash || 'Invalid'}}</label>
            <ng-template pTemplate="footer">
              <p-badge class="ml-2"  [value]="'File count：' + (config.fileCount || -1)" severity="success"></p-badge>
              <p-tag severity="warning" [value]="'Last update：' + config.updateDate" *ngIf="config.updateDate"></p-tag>
            </ng-template>
          </p-panel>
        </td>
        <td>
          <ng-container *ngIf="config.hash">
            <p-button (click)="addPath(rowIndex)" label="Modify"></p-button>
            <p-button label="Delete" (click)="del(rowIndex)" severity="danger"></p-button>
          </ng-container>
        </td>
    </tr>
  </ng-template>
</p-table>

